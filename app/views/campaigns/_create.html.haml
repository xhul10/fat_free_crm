%script{:type => "text/javascript"}
  - if error_message_on(@campaign, :name).blank? and !error_message_on(@campaign, :ends_on).blank?
    $("campaign_ends_on").focus();
  - else
    $("campaign_name").focus();
  crm.date_select_popup("campaign_starts_on");
  crm.date_select_popup("campaign_ends_on");

- remote_form_for(@campaign) do |f|
  = hidden_field_tag "campaign[user_id]", @current_user.id
  = f.error_messages
  .section
    %table{ :width => 500, :cellpadding => 0, :cellspacing => 0 }
      %tr
        %td{ :colspan => 4, :valign => :top }
          .label.top.req Campaign name:
          = f.text_field :name, :style => "width:500px"
      %tr
        %td{ :valign => :top }
          .label Start date:
          = f.text_field :starts_on, :style => "width:110px", :autocomplete => :off
        %td= spacer
        %td{ :valign => :top }
          .label End date:
          = f.text_field :ends_on, :style => "width:110px", :autocomplete => :off
        %td= spacer(260)
  = render :partial => "objectives", :locals => { :f => f }
  = render :partial => "permissions",  :locals => { :f => f }
  .buttonbar
    = f.submit "Create Campaign"
    or
    = link_to_remote "Cancel", { :url => new_campaign_path, :with => "visible=true" }
