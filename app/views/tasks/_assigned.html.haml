%li[assigned]{ highlightable(dom_id(assigned, :tools)) }
  - unless assigned.category.blank?
    .strip{:class => assigned.category}= t(assigned.category)
  - else
    .strip{:style => "color:white"} #{t:category_other}
  %div
    .tools{ invisible, :id => dom_id(assigned, :tools) }
      %small
        = link_to_task_edit(assigned, bucket) + " | "
        = link_to_task_delete(assigned, bucket) + "&nbsp;"
    = link_to(assigned.assignee.full_name, user_path(assigned.assignee)) + ": "
    = assigned.name
    - if assigned.asset_id?
      == #{t:related} #{link_to(assigned.asset.name, polymorphic_url(assigned.asset))}
    &ndash;
    %tt
      - if assigned.bucket == "due_asap"
        %span.urgent 
        == #{t:due_now}.
      - elsif assigned.bucket == "due_later"
        == #{t:due_later}.
      - elsif assigned.due_at < Date.today
        %span.warn= distance_of_time_in_words(assigned.due_at, Date.today) 
        == #{t:overdue} #{assigned.due_at.strftime('%b %e')}
      - elsif assigned.due_at > Date.today
        == #{t:due_in} #{distance_of_time_in_words(Time.now, assigned.due_at.end_of_day)}
      - else
        %span.cool
        == #{t:due_today}.
      
