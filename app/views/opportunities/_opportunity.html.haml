%li{ highlightable(dom_id(opportunity)) }
  - if opportunity.stage
    .strip{:class => opportunity.stage}= @stage[opportunity.stage.intern]
  - else
    .strip &nbsp;
  %div
    .tools[opportunity]{ hidden }
      = link_to(image_tag("information.png", :title => "View #{h(opportunity.name)}"), opportunity_path(opportunity))
      = link_to(image_tag("tick_circle.png", :title => "Edit #{h(opportunity.name)}"), edit_opportunity_path(opportunity))
      = link_to(image_tag("cross_circle.png", :title => "Delete #{h(opportunity.name)}"), "#")
    = link_to(opportunity.name, opportunity)
    %tt
      &ndash;
      == added #{time_ago_in_words(opportunity.created_at)} ago by
      == #{opportunity.user.id == @current_user.id ? "me" : opportunity.user.full_name}
    %dt
      %b= number_to_currency(opportunity.weighted_amount, :precision => 0) << " | "
      - unless %w(won lost).include?(opportunity.stage)
        =  number_to_currency(opportunity.amount || 0, :precision => 0) << " with #{opportunity.probability || 0}% probability |"
      - if opportunity.closes_on
        == expected to close in #{distance_of_time_in_words(Date.today, opportunity.closes_on)}
      - else
        no expected closing date
