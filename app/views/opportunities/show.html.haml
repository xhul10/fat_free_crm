= styles_for :account, :campaign

#confirm{ hidden }
.title_tools#menu
  = link_to("Edit", edit_opportunity_path(@opportunity)) + " | "
  = link_to_function("Delete?", confirm_delete(@opportunity))
.title= @opportunity.name

= render :partial => "common/new_comment", :locals => { :commentable => @opportunity }
= render :partial => "common/comment", :collection => @opportunity.comments

%br
.subtitle Account
.list#accounts
  - if @opportunity.account
    = render :partial => "accounts/account", :collection => [ @opportunity.account ]
  - else
    %small Select or Create Account (not implemented yet).

%br
.subtitle Campaign
.list#campaigns
  - if @opportunity.campaign
    = render :partial => "campaign/campaign", :collection => [ @opportunity.campaign ]
  - else
    %small Select or Create Campaign (not implemented yet).

%br
- @context = "create_contact_opportunities_#{@opportunity.id}" # NOTE: pluralized opportunities
= inline @context, new_contact_path, "Create Contact", { :class => "subtitle_tools" }
.subtitle{ :id => "#{@context}_title"} Contacts

.remote{ hidden, :id => @context }
.list#contacts
  = render :partial => "contacts/contact", :collection => @opportunity.contacts